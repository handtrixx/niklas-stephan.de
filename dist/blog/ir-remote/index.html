<!doctype html><html lang=de dir=ltr data-ui-theme=light><head><style>:root,[data-ui-theme=light]{--spacing-unit:0.25rem;--font-size:16px;--color-primary-r:184;--color-primary-g:5;--color-primary-b:5;--color-primary:rgb(var(--color-primary-r), var(--color-primary-g), var(--color-primary-b));--color-primary-hex:#b80505;--color-secondary:#79747E;--color-light:#f8f1f6;--color-lighter:#fefbff;--color-dark:#1c1b1d;--color-darker:#141314;--color-gray:#9E9E9E;--color-darkgray:#3a3a3a;--color-shadow:rgba(0, 0, 0, 0.3);--giscus-scheme:light}:root[data-ui-theme=dark]{--color-light:#1c1b1d;--color-lighter:#141314;--color-dark:#f8f1f6;--color-darker:#fefbff;--color-shadow:rgba(0, 0, 0, 0.5);--giscus-scheme:dark}</style><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>IR-Remote Control 4.0 – Alles ins IoT! | niklas-stephan.de</title><link rel=icon href=/images/favicon.png type=image/png><link rel=stylesheet href=/css/combined.min.838724711758bf7484da688fe3f77b6dbd7977a319601c1d80a0fe46e5af736b.css integrity="sha256-g4ckcRdYv3SE2miP4/d7bb15d6MZYBwdgKD+RuWvc2s="><meta name=description content="Universalfernbedienung? Mehr 90er geht es ja nicht! Was aber wenn die alte Infrarot Fernbedienung
alle Lichter im Raum ein- und ausschalten, die Heizung oder Rollos bedienen und das
Heimkino gleichzeitig steuern kann? Dieser Beitrag hat es in sich, denn auf diese Art lässt sich
jedes irgendwie auslesbare/anbindbare Gerät in euer Alexa, HomeKit oder nahezu jede andere Smart
Home Lösung integrieren! Das alles ohne Abos, versteckte Kosten und auf Wunsch auch ganz ohne die
Cloud irgendeines großen Konzerns."><meta property="og:title" content="IR-Remote Control 4.0 – Alles ins IoT!"><meta property="og:description" content="Universalfernbedienung? Mehr 90er geht es ja nicht! Was aber wenn die alte Infrarot Fernbedienung
alle Lichter im Raum ein- und ausschalten, die Heizung oder Rollos bedienen und das
Heimkino gleichzeitig steuern kann? Dieser Beitrag hat es in sich, denn auf diese Art lässt sich
jedes irgendwie auslesbare/anbindbare Gerät in euer Alexa, HomeKit oder nahezu jede andere Smart
Home Lösung integrieren! Das alles ohne Abos, versteckte Kosten und auf Wunsch auch ganz ohne die
Cloud irgendeines großen Konzerns."><meta property="og:type" content="article"><meta property="og:url" content="https://niklas-stephan.de/blog/ir-remote/"><meta property="og:site_name" content="niklas-stephan.de"><meta property="og:image" content="https://niklas-stephan.de/blog/ir-remote/01_ir_remote_teaser.webp"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="IR-Remote Control 4.0 – Alles ins IoT!"><meta name=twitter:description content="Universalfernbedienung? Mehr 90er geht es ja nicht! Was aber wenn die alte Infrarot Fernbedienung
alle Lichter im Raum ein- und ausschalten, die Heizung oder Rollos bedienen und das
Heimkino gleichzeitig steuern kann? Dieser Beitrag hat es in sich, denn auf diese Art lässt sich
jedes irgendwie auslesbare/anbindbare Gerät in euer Alexa, HomeKit oder nahezu jede andere Smart
Home Lösung integrieren! Das alles ohne Abos, versteckte Kosten und auf Wunsch auch ganz ohne die
Cloud irgendeines großen Konzerns."><meta name=twitter:image content="https://niklas-stephan.de/blog/ir-remote/01_ir_remote_teaser.webp"></head><body><div class=nav-wrapper><div class=nav-bar><a href=/ aria-label="Link to Homepage" class=nav-link><img src=/images/favicon.png alt=favicon width=30 height=30>
<span class="text-fingerpaint d-none d-sm-flex">iklas-stephan.de</span></a><div class="d-none d-md-flex"><a class=nav-link href=/ aria-label=Home>Home</a>
<a class=nav-link href=/blog aria-label=Blog>Blog</a></div><div class=d-flex><a href=/search type=button aria-label="Search Button" class="nav-link btn btn-circle-text-small"><svg width="24" height="24" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16"><path d="M11.742 10.344a6.5 6.5.0 10-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 001.415-1.414l-3.85-3.85a1 1 0 00-.115-.1zM12 6.5a5.5 5.5.0 11-11 0 5.5 5.5.0 0111 0"/></svg>
</a><button id=themeswitch role=button aria-label="Theme Switch Button" onclick=themeswitch() class="btn btn-circle-text-small">
<svg width="24" height="24" fill="currentColor" class="bi bi-moon-stars-fill" viewBox="0 0 16 16"><path d="M6 .278a.77.77.0 01.08.858 7.2 7.2.0 00-.878 3.46c0 4.021 3.278 7.277 7.318 7.277q.792-.001 1.533-.16a.79.79.0 01.81.316.73.73.0 01-.031.893A8.35 8.35.0 018.344 16C3.734 16 0 12.286.0 7.71.0 4.266 2.114 1.312 5.124.06A.75.75.0 016 .278"/><path d="M10.794 3.148a.217.217.0 01.412.0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217.0 010 .412l-1.162.387A1.73 1.73.0 0011.593 7.69l-.387 1.162a.217.217.0 01-.412.0l-.387-1.162A1.73 1.73.0 009.31 6.593l-1.162-.387a.217.217.0 010-.412l1.162-.387a1.73 1.73.0 001.097-1.097zM13.863.099a.145.145.0 01.274.0l.258.774c.115.346.386.617.732.732l.774.258a.145.145.0 010 .274l-.774.258a1.16 1.16.0 00-.732.732l-.258.774a.145.145.0 01-.274.0l-.258-.774a1.16 1.16.0 00-.732-.732l-.774-.258a.145.145.0 010-.274l.774-.258c.346-.115.617-.386.732-.732z"/></svg>
</button>
<button id=fontsmaller role=button aria-label="Font Switch smaller Button" onclick='fontswitch("smaller")' class="btn btn-circle-text-small">
<svg width="24" height="24" fill="currentColor" class="bi bi-dash-lg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2 8a.5.5.0 01.5-.5h11a.5.5.0 010 1h-11A.5.5.0 012 8"/></svg>
</button>
<button id=fontreset role=button aria-label="Font Switch reset Button" onclick='fontswitch("reset")' class="btn btn-circle-text-small">
<svg width="24" height="24" fill="currentColor" class="bi bi-fonts" viewBox="0 0 16 16"><path d="M12.258 3h-8.51l-.083 2.46h.479c.26-1.544.758-1.783 2.693-1.845l.424-.013v7.827c0 .663-.144.82-1.3.923v.52h4.082v-.52c-1.162-.103-1.306-.26-1.306-.923V3.602l.431.013c1.934.062 2.434.301 2.693 1.846h.479z"/></svg>
</button>
<button id=fontbigger role=button aria-label="Font Switch bigger Button" onclick='fontswitch("bigger")' class="btn btn-circle-text-small">
<svg width="24" height="24" fill="currentColor" class="bi bi-plus-lg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 2a.5.5.0 01.5.5v5h5a.5.5.0 010 1h-5v5a.5.5.0 01-1 0v-5h-5a.5.5.0 010-1h5v-5A.5.5.0 018 2"/></svg></button><div class="dropdown d-md-none" style=float:right><button class="btn btn-circle-text-small" onclick=toggleDropdown(this) aria-expanded=false>
<svg width="24" height="24" fill="currentColor" class="bi bi-list" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2.5 12a.5.5.0 01.5-.5h10a.5.5.0 010 1H3a.5.5.0 01-.5-.5m0-4a.5.5.0 01.5-.5h10a.5.5.0 010 1H3A.5.5.0 012.5 8m0-4a.5.5.0 01.5-.5h10a.5.5.0 010 1H3A.5.5.0 012.5 4"/></svg></button><div class=dropdown-content style=display:none><a href=/ aria-label=Home>Home</a>
<a href=/blog aria-label=Blog>Blog</a></div></div></div></div></div><main><div id=page-assitant-toggler class="position-fixed bottom-0 right-0"><button type=button class="btn btn-circle p mb me" onclick=togglePostNav() alt=Einstellungen style=--p-scale:0;--mb-scale:4;--me-scale:4>
<svg width="24" height="24" fill="currentColor" class="bi bi-gear" viewBox="0 0 16 16"><path d="M8 4.754a3.246 3.246.0 100 6.492 3.246 3.246.0 000-6.492M5.754 8a2.246 2.246.0 114.492.0A2.246 2.246.0 015.754 8"/><path d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592.0l-.094.319a.873.873.0 01-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873.0 01-.52 1.255l-.319.094c-1.79.527-1.79 3.065.0 3.592l.319.094a.873.873.0 01.52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873.0 011.255.52l.094.319c.527 1.79 3.065 1.79 3.592.0l.094-.319a.873.873.0 011.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873.0 01.52-1.255l.319-.094c1.79-.527 1.79-3.065.0-3.592l-.319-.094a.873.873.0 01-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873.0 01-1.255-.52zm-2.633.283c.246-.835 1.428-.835 1.674.0l.094.319a1.873 1.873.0 002.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873.0 001.116 2.692l.318.094c.835.246.835 1.428.0 1.674l-.319.094a1.873 1.873.0 00-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873.0 00-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674.0l-.094-.319A1.873 1.873.0 004.377 12.94l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873.0 001.945 8.93l-.319-.094c-.835-.246-.835-1.428.0-1.674l.319-.094A1.873 1.873.0 003.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873.0 002.692-1.115z"/></svg></button></div><div class="block-post-nav d-none" id=block-post-nav><div class="p pt w-100" style=--p-scale:2;--pt-scale:5><div class="d-flex justify-content-center align-items-center"><h5 class=mb style=align-self:center;--mb-scale:0>Konfiguration</h5><button class="ms-auto btn-circle-text-small" onclick=togglePostNav() aria-label="Close navigation">
<svg width="16" height="16" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16"><path d="M2.146 2.854a.5.5.0 11.708-.708L8 7.293l5.146-5.147a.5.5.0 01.708.708L8.707 8l5.147 5.146a.5.5.0 01-.708.708L8 8.707l-5.146 5.147a.5.5.0 01-.708-.708L7.293 8z"/></svg></button></div><hr class=my style=--my-scale:4><h6>Inhalt</h6><ul class=content-index-list id=content-index-list><li class="content-index-item active" onclick=scrollToTop()>Anfang</li></ul></div></div><div class=post-container><nav aria-label=breadcrumb><ul class=breadcrumb><li class=breadcrumb-item><a href=/blog>Blog</a></li><svg width="16" height="16" fill="currentColor" class="bi bi-chevron-right mx" style="--mx-scale:2" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.646 1.646a.5.5.0 01.708.0l6 6a.5.5.0 010 .708l-6 6a.5.5.0 01-.708-.708L10.293 8 4.646 2.354a.5.5.0 010-.708"/></svg><li class="breadcrumb-item active" aria-current=page>Beitrag</li></ul></nav><h1 class=fs style=--fs-scale:3>IR-Remote Control 4.0 – Alles ins IoT!</h1><div class="post-meta mb-4"><time datetime=2022-12-03>3. December 2022</time><div class="tags mt-2"><span class="badge bg-secondary me-1">deutsch</span></div></div><p>Universalfernbedienung? Mehr 90er geht es ja nicht! Was aber wenn die alte Infrarot Fernbedienung
alle Lichter im Raum ein- und ausschalten, die Heizung oder Rollos bedienen und das
Heimkino gleichzeitig steuern kann? Dieser Beitrag hat es in sich, denn auf diese Art lässt sich
jedes irgendwie auslesbare/anbindbare Gerät in euer Alexa, HomeKit oder nahezu jede andere Smart
Home Lösung integrieren! Das alles ohne Abos, versteckte Kosten und auf Wunsch auch ganz ohne die
Cloud irgendeines großen Konzerns.</p><p><img src=02_ir_overvall.webp alt=Illustration></p><h2 id=zielsetzung>Zielsetzung</h2><p>In dieser kleinen Aufbauanleitung beschreibe ich wie ich aus mehreren Komponenten ein IoT
(Internet of Things) Szenario aufgebaut habe. Ein grundsätzliches technisches Verständnis hilft
dabei die einzelnen Schritte nachzuvollziehen,
ein IT-Studium oder eine ähnliche Ausbildung ist aber definitiv nicht erforderlich!</p><p>Das Ziel ist es mit einer handelsüblichen (gerne auch aus dem untersten Preissegment,
oder noch besser: Elektroschrott) Infrarot Fernbedienung verschiedene Aktionen in einem Smart Home auszulösen.
Ich will von einer einfachen Hardwareumgebung aus, beim Eintreffen eines Infrarotsignals,
dessen Eingabewerte an meine Heimautomatisierung übergeben.</p><p>Als Hardware nutzen wir den kleinen Bruder des weltberühmten Raspberry Pi,
den Zero W und wenig weiteres Zubehör. Alles davon kann auch ohne Mühen für andere Zwecke genutzt werden.
Dank tausenden von verfügbaren “Bastelanleitungen” im Netz ist die eventuelle
Neuanschaffung auf keinen Fall umsonst.</p><p>Bei der Software wähle ich wie immer möglichst ausschließlich Open Source Quellen,
wie z.B. Linux und Node-RED. Die gigantische Community dahinter leistet uns eine
24/7 Unterstützung bei jeglicher Art von Problemstellung.</p><h2 id=hardware>Hardware</h2><p>Viel mehr als in der Zielsetzung beschrieben braucht es wirklich nicht.
Falls du die Komponenten nicht herumliegen hast, hier zunächst ein paar Kaufempfehlungen.</p><p><img src=03_pizero_kit.webp alt=Hardware></p><p>Ab ca. 16 € gibt es den Kleinstcomputer Raspberry Pi Zero W mit passendem Gehäuse
z.B. hier: <a href=https://www.berrybase.de/raspberry-pi/raspberry-pi-computer/kits/raspberry-pi-zero-w-zusammenstellung-zero-43-case>https://www.berrybase.de/raspberry-pi/raspberry-pi-computer/kits/raspberry-pi-zero-w-zusammenstellung-zero-43-case</a>.
Der Zero ist für unseren Zweck besonders gut geeignet,
weil wir zum einen keine besonders große Leistung benötigen,
zum anderen aber Strom sparen wollen. Denn wir planen einen Dauerbetrieb.
Mit einer Spannung von 2,3 bis 5,0 V und einer Stromstärke von 100 bis 140 mA,
müsste der tatsächliche Stromverbrauch zwischen 0,23 Watt und 0,7 Watt liegen.
Das ist weniger als so mancher Fernseher im Standby “frisst”. Das klingt vielleicht
alles super “billig”, winzig und schwach, aber: Es ist 2021 und das bisschen Hardware
hat die gleiche Rechenleistung wie ein Spitzen-Heimcomputer kurz nach der Jahrtausendwende.
Und Windows XP wollen wir ja gar nicht installieren…</p><p>Damit der Raspberry funktioniert braucht es noch Strom, am besten aus einem alten Handynetzteil mit Micro-USB Anschluss. Falls gerade keines verfügbar ist, bekommt man so etwas Überall für wenige Euro, so z.B. auch im Supermarkt.
Hinzu kommt noch eine Micro-SD Karte, die vielleicht auch noch irgendwo zuhause herumliegt.
Alles ab 8GB Größe ist OK, nur sollte sie über den Zusatz “XD” oder “HC” verfügen,
damit man sicher ist nicht eine “lahme Ente” zu verwenden. Da geht es bei ca. 3 € los und auch
hier wird man in den meisten Supermärkten fündig.</p><p>Ein kleines Adapterkabel hilft uns Geräte mit normalgroßem (Typ A) USB-Anschluss, wie den Infrarotempfänger, mit dem Raspberry Pi Zero zu verbinden. Das wiederum wird man eher selten im Supermarkt finden, aber z.B. hier: <a href=https://www.berrybase.de/raspberry-pi/raspberry-pi-computer/kabel-adapter/usb-kabel-adapter/usb-2.0-hi-speed-otg-adapterkabel-a-buchse-micro-b-stecker-0-15m-wei-223>https://www.berrybase.de/raspberry-pi/raspberry-pi-computer/kabel-adapter/usb-kabel-adapter/usb-2.0-hi-speed-otg-adapterkabel-a-buchse-micro-b-stecker-0-15m-wei-223</a>. Und damit ist man weitere 1,80 € ärmer.
Wer nun über gar keine dieser Komponenten verfügt, kann sich auch ein Komplettset besorgen, z.B. hier: <a href=https://www.berrybase.de/raspberry-pi/raspberry-pi-computer/kits/raspberry-pi-zero-w-zusammenstellung-full-starter-kit>https://www.berrybase.de/raspberry-pi/raspberry-pi-computer/kits/raspberry-pi-zero-w-zusammenstellung-full-starter-kit</a>
Um die SD-Karte später mit dem Betriebssystem bespielen zu können, brauchen wir noch ein SD-Kartenleser. Die meisten Laptops haben einen solchen integriert. Aber falls nicht, gibt es die auch günstig ab 5€ fast überall und z.B. hier: <a href=https://www.heise.de/preisvergleich/sandisk-mobilemate-single-slot-cardreader-sddr-b531-gn6nn-a2356696.html>https://www.heise.de/preisvergleich/sandisk-mobilemate-single-slot-cardreader-sddr-b531-gn6nn-a2356696.html</a></p><p><img src=04_flirc.webp alt=FLIRC></p><p>Bei der Fernbedienung hat man die Qual der Wahl. Wirklich jegliche Art von Gerät, das ein Infrarotsignal sendet, kommt hier in Frage. Es sollte natürlich keine genommen werden, die zu einem aktiv benutzten Gerät im gleichen Raum gehört, aber das versteht sich hoffentlich von selbst. Ich habe eine alte Universalfernbedienung benutzt, die ich noch übrighatte. Damit habe ich es mir selbst einen kleinen Tick schwieriger gemacht als nötig, da ich diese nun auf ein nicht vorhandenes Empfangsgerät voreinstellen musste. Einfacher wäre es gewesen, wirklich eine ganz “normale” zu verwenden.</p><p>Zum Schluss noch der Infrarotempfänger. Das ist tatsächlich fast die größte Investition hier im Projekt. Ich hatte noch den, qualitativ hochwertigen und mit cleverer Softwarelösung kommenden, FLIRC USB-Empfänger. Den bekommt man z.B. hier: <a href=https://www.heise.de/preisvergleich/flirc-usb-rev-2-flirc-v2-a1621664.html>https://www.heise.de/preisvergleich/flirc-usb-rev-2-flirc-v2-a1621664.html</a>, ab ca. 24 €</p><p>Alles in allem also eine Investition zwischen 0€ und maximal 65€ Euro.</p><h2 id=software>Software</h2><p>Nun zum zumindest für Anfänger komplizierten Teil, aber immerhin: viel Software braucht es nicht. Eigentlich nur ein Betriebssystem und zwei zusätzliche Programme/Tools. Da sich die Fernbedienung am einfachsten über eine Desktopumgebung konfigurieren lassen wird, installieren wir diese auf unsere SD-Karte. Das geht mittlerweile maximal einfach. Unter <a href=https://www.raspberrypi.org/software/>https://www.raspberrypi.org/software/</a> gibt es das Programm “Raspberry Pi Imager”, welches ihr dort für euer Betriebssystem herunterladen könnt. Vor dem Öffnen des heruntergeladenen und installiertem Programms steckt ihr noch die SD-Karte in euren SD-Karten-Lesegerät bzw. -slot. Im Programm wählt ihr dann das Betriebssystem “Raspberry PI OS (32-Bit)” aus, und als SD-Karte die eurige. Mit einem Klick auf “SCHREIBEN” wird das Betriebssystem auf eure Karte kopiert.</p><p>Sobald der Vorgang abgeschlossen ist, entfernt ihr die Karte bitte noch NICHT. Denn wir wollen zuvor noch zwei Dinge erledigen, die uns das Leben anschließend erleichtern. Falls schon, vor Ungeduld oder welchem Grund auch immer, herausgezogen ist das auch kein Problem, einfach wieder rein damit. Zunächst erstellen wir im Hauptverzeichnis der SD-Karte eine, gerne auch leere, Datei mit dem Namen “ssh”. Bitte achtet darauf, dass die Datei keine versteckte Endung wie z.B. “.txt” hat. Das passiert gerne unter den Standardeinstellungen von Windows. Mac und Linux Anwender haben dieses Problem in der Regel nicht. Wem das zu ungenau beschrieben ist, der guckt bitte hier: <a href=https://www.shellhacks.com/raspberry-pi-enable-ssh-headless-without-monitor/>https://www.shellhacks.com/raspberry-pi-enable-ssh-headless-without-monitor/</a>.</p><p>Jetzt möchten wir noch gleich die Verbindungsdaten zu unserem WLAN angeben, damit die Netzwerkverbindung von Anfang an sichergestellt ist. Dazu legen wir eine zweite Datei Namens “wpa_supplicant.conf” in das Gleiche Verzeichnis. Windows Benutzer passen wieder bei der Dateiendung auf. Dieses Mal kommt es aber auf den Inhalt der Datei an:</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#6e7681">1</span><span><span style=color:#79c0ff>country</span><span style=color:#ff7b72;font-weight:700>=</span>DE
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#6e7681">2</span><span><span style=color:#79c0ff>ctrl_interface</span><span style=color:#ff7b72;font-weight:700>=</span><span style=color:#79c0ff>DIR</span><span style=color:#ff7b72;font-weight:700>=</span>/var/run/wpa_supplicant <span style=color:#79c0ff>GROUP</span><span style=color:#ff7b72;font-weight:700>=</span>netdev
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#6e7681">3</span><span><span style=color:#79c0ff>update_config</span><span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>1</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#6e7681">4</span><span><span style=color:#79c0ff>network</span><span style=color:#ff7b72;font-weight:700>={</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#6e7681">5</span><span>    <span style=color:#79c0ff>ssid</span><span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;DerNameDeinesWLANs&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#6e7681">6</span><span>    <span style=color:#79c0ff>psk</span><span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;DeinWLANPasswort&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#6e7681">7</span><span>    <span style=color:#79c0ff>key_mgmt</span><span style=color:#ff7b72;font-weight:700>=</span>WPA-PSK
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#6e7681">8</span><span><span style=color:#ff7b72;font-weight:700>}</span>
</span></span></code></pre></div><p>Das ist nur ein Beispiel, und wir müssen die Werte in den Klammern bei den Zeilen “ssid” und “psk” auf die Werte unseres WLANs setzen.</p><p>Jetzt sind wir aber fertig und die Karte kann entfernt und in den Raspberry gesetzt werden. Nun steckt ihr alle Komponenten zusammen und bringt das Ganze an seinen Bestimmungsort. Sobald ihr das Gerät mit dem Netzteil verbunden habt, seht ihr:</p><h3 id=erstmal-nicht-viel>Erstmal nicht viel.</h3><p>Kein Grund zur Panik, das ist normal und ihr habt vermutlich alles richtig gemacht. Wir machen einfach weiter.</p><p>Wir sind jetzt in der Lage uns per SSH auf dem kleinen Raspberry anzumelden, um dort ein paar Dinge einzustellen. Um sich kurz auf Kommandozeilenebene die Finger schmutzig zu machen, kommen wir leider nicht herum und leider lässt sich dafür im Falle des Raspberry Pi Zeros auch nicht Visual Studio Code verwenden. Ein Terminal muss her.</p><p>Unter MacOS und Linux ist eine Terminal Applikation für die Kommandozeile seit je her eingebaut und heißt dort auch so. Soweit ich weiß, steht das SSH Kommando auch in Windows 10 zur Verfügung, kann das aber leider gerade nicht testen. Allen die damit nicht vertraut sind, hilft Google gerne weiter. Die Verbindung zu unserem neuen Kleinstcomputer stellen wir dann wie folgt her:</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#6e7681">1</span><span>ssh pi@192.168.178.22
</span></span></code></pre></div><p>Die IP-Adresse muss natürlich auf die eures Raspi angepasst werden. Die bekommt ihr am schnellsten über das Webinterface eures Routers heraus. Das Standardpasswort nachdem ihr nun gefragt werdet ist: raspberry . Wenn ihr das nach der Anmeldung gleich ändern möchtet, geht das mit dem Befehl “passwd”. Es empfiehlt sich Betriebssystem und Software regelmäßig auf den neuesten Stand zu bringen, das macht man mit den Befehlen:</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#6e7681">1</span><span>sudo apt-get update
</span></span></code></pre></div><p>um aktuell verfügbare Pakete zu ermitteln, um diese dann wiederum mit:</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#6e7681">1</span><span>sudo apt-get upgrade
</span></span></code></pre></div><p>zu installieren. Jetzt installieren wir Node-RED mit dem Befehl:</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#6e7681">1</span><span>bash &lt;<span style=color:#ff7b72;font-weight:700>(</span>curl -sL https://raw.githubusercontent.com/node-red/linux-installers/master/deb/update-nodejs-and-nodered<span style=color:#ff7b72;font-weight:700>)</span>
</span></span></code></pre></div><p>und wenn wir schon dabei sind, bestimmen wir noch, dass Node-RED bei jedem Systemstart automatisch gestartet wird:</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#6e7681">1</span><span>sudo systemctl enable nodered.service
</span></span></code></pre></div><p>Nun starten wir das System am besten einmal neu. Das geht mit:</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#6e7681">1</span><span>sudo reboot
</span></span></code></pre></div><p>Nach spätestens 3-4 Minuten sollte alles wieder hochgefahren sein und wir müssten in der Lage sein auf Node-RED, über den Browser eines beliebigen Gerätes in eurem Netzwerk, zuzugreifen:</p><pre tabindex=0><code>https://192.168.178.22:1880
</code></pre><p>Auch hier die IP-Adresse durch die eures Raspis ersetzen. Wenn sich nun die Weboberfläche von Node-RED öffnet, können wir unseren ersten Erfolg feiern. Wir haben aus unserem kleinen Raspi ein mächtiges IoT Werkzeug gemacht!</p><p>Jetzt wollen wir uns daran machen unsere Fernbedienung zu konfigurieren. Dafür müssen wir noch einmal die Kommandozeile bemühen und uns wie zuvor beschrieben auf den Raspi schalten. Als Erstes prüfen wir, ob uns der Desktop des Raspis später zur Verfügung stehen wird. Wie das geht, ist perfekt hier: <a href=https://www.raspberrypi.org/documentation/remote-access/vnc/>https://www.raspberrypi.org/documentation/remote-access/vnc/</a> beschrieben. Dort auf den Abschnitt “Enabling VNC Server at the command line” fokussieren, den Rest können wir für den Moment ignorieren.</p><p>Auch auf Kommandozeilenebene installieren wir die grafische Oberfläche für unseren Flirc Infrarotempfänger. Das geht mit (copy & paste):</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#6e7681">1</span><span>curl apt.flirc.tv/install.sh | sudo bash
</span></span></code></pre></div><p>Jetzt haben wir alles zusammen was wir brauchen und können endlich mit dem richtigen Spaß beginnen.</p><h2 id=konfiguration>Konfiguration</h2><p>Verglichen mit der Softwareinstallation, ist die eigentliche Konfiguration nun ein “Klacks”.</p><p>Im ersten Schritt lernen wir unsere Fernbedienung an. Dazu schalten wir uns per VNC auf den Desktop des Raspberry PI Zero. Dort öffnen wir dann das Programm Flirc, welches wir im Startmenü finden. Bevor es losgeht, stellen wir die Ansicht noch auf “Keyboard” um. Dadurch stehen uns schon ohne Tastenkombinationen mehr als 127 Kommandos (Tasten) zur Verfügung, die wir auf unserer Fernbedienung belegen können. Da wir niemals eine echte Tastatur an den Raspi anschließen werden, ist das Einzige, worauf wir achten müssen, dass wir keine Sondertasten belegen. Die “Drucken” Taste zu belegen ist also keine gute Idee, alle Zahlen und Buchstaben: kein Problem. Um die Belegung zu starten, klicken wir im Programm auf eine der angezeigten Tasten, also z.B. “F”. Dadurch werden wir nun aufgefordert unsere Fernbedienung in Richtung des Infrarot Empfänger zu halten und darauf ebenfalls einen Knopf zu drücken. Dieses Prozedere spielen wir für alle Knöpfe auf unserer Fernbedienung durch, die wir später mit einer Aktion hinterlegen wollen. Jetzt ist unsere Fernbedienung “angelernt” und wir können die VNC Session wieder beenden. Das FLIRC Programm kann vorher auch beendet werden, es läuft im Hintergrund weiter und unsere Kommandos stehen auch nach einem Neustart weiterhin zur Verfügung.</p><p>Ab hier darf jetzt Node-RED zeigen was es kann. Und das Programm macht es uns maximal einfach! Wir öffnen wieder im Browser eines beliebigen Endgeräts unseres Netzwerks die Node-RED GUI:</p><pre tabindex=0><code>https://192.168.178.22:1880
</code></pre><p>Unser Flow (Ablauf) benötigt nur zwei Knoten aus dem “Standardsortiment”. Als erstes ziehen wir aus der linken Leiste einen “rpi – keyboard” Knoten in den Flow. Der macht nichts anderes als, wie der Name es erahnen lässt, auf Tastatureingaben am Raspi zu lauschen. Durch unsere Konfiguration von FLIRC hört er so automatisch auch auf die Eingaben unserer Fernbedienung. Wer das Testen oder einfach sehen möchte, ob es funktioniert, fügt einen Debug nun in den Flow ein und verbindet diesen mit dem Ausgang unseres “rpi – keyboard” Nodes. Nach einem Klick auf Deploy oben rechts sollte nun nach jedem druck auf der Fernbedienung auf einen angelernten Knopf, eine Nachricht im Debug Fenster auftauchen. So weit so gut.</p><p>Nun wollen wir uns mit der Außenwelt verbinden. Dafür stehen uns unterschiedlichste Möglichkeiten zur Auswahl. So können wir die Ereignisse bereits mit Node-Red Bordmitteln in eine Datei schreiben, mit einem Webservice Aufruf koppeln oder auch eine Nachricht über einen Websocket übertragen. Auch stehen MQTT, TCP, UDP und sogar die serielle Ausgabe als Übertragungsmöglichkeit im Standard offen. Damit sollte eigentlich schon jeder Wunsch abgedeckt sein, aber noch mehr Komfort zur Integration in bestehende Smart Home Netze gibt es durch optionale installierbare Module. So machen wir unser Setup mit dem Modul “node-red-contrib-homekit-bridged” z.B. zu einem HomeKit Endgerät nach Apple Standard. Das gleiche funktioniert auch mit OpenHab <a href=https://flows.nodered.org/node/node-red-contrib-openhab3>https://flows.nodered.org/node/node-red-contrib-openhab3</a> oder sogar Alexa <a href=https://flows.nodered.org/node/node-red-contrib-virtual-smart-home>https://flows.nodered.org/node/node-red-contrib-virtual-smart-home</a> und eigentlich allem was es so auf dem Markt gibt und über ein Netzwerk kommuniziert. Ich persönlich habe mich für die Übertragung via Websockets ohne zusätzliches Modul entschieden.</p><hr><h3 id=halt-stop-warum-auf-einmal-jetzt-websockets>Halt, Stop! Warum auf einmal jetzt Websockets?</h3><p>In meinem ersten Aufbau hatte ich die Kommandos der Fernbedienung über eine “normale” API zu übertragen versucht. Das funktioniert zwar ebenso prächtig ist aber zu langsam! Beim Drücken eines Knopfes auf einer Fernbedienung erwartet jeder eine sofortige Reaktion bzw. Aktion. 1 Sekunde Verzögerung fühlt sich unnatürlich an, 2 Sekunden sind bereits unerträglich. Man stelle sich vor man will z.B. die Lautstärke des Fernsehers stück für stück erhöhen. Ganz schnell habe ich 20-mal oder öfter gedrückt und die API-Kommandos werden langsam abgearbeitet. So arbeitet man erfolgreich an einem Hörsturz. Jeder der jetzt gerade Kopfkino spielt: Ja, genau so ist es mir ergangen…</p><p>Vor ähnlichen Erfahrungen möchte ich euch schützen und deswegen greifen wir gleich auf Websockets zurück. Ohne zu tief in die Grundlagen der Informatik eingehen zu wollen, handelt es sich bei Websockets um eine Interprozesskommunikation (IPC) über das HTTP (WEB) Protokoll. Anders formuliert: Mit Websockets bauen wir einen Tunnel zwischen zwei oder mehr Geräten zur Echtzeitkommunikation auf. Genau was wir hier brauchen!</p><hr><p>Der zweite Knoten, den wir in den Flow ziehen ist also ein “Websocket out” aus dem Netzwerkbereich. Auf diesen hört wiederum ein „Websocket in“ in meiner Heimautomatisierungslösung, die ebenfalls mit Node-Red realisiert ist. Wenn ihr ein anderes System zur Heimautomatisierung einsetzt, wäre die Eingabe des “rpi – keyboard” Nodes/Knotens an das entsprechende Modul weiterzuleiten. So lässt sich eben auch, wie in der Einleitung angekündigt, jedes andere Gerät in euer IoT einbinden.</p><h2 id=fazit>Fazit</h2><p>In unserem kleinen Versuch haben wir spielerisch aus einer alten Infrarot Fernbedienung eine sinnvolle Erweiterung unserer Smart Homes geschaffen. Da unser Raspi Zero nur wenig Strom verbraucht, wäre theoretisch auch eine Energieversorgung über einen Akku oder eine Powerbank denkbar, womit das ganze Setup sogar mobil werden würde.</p><p>Der ein oder andere “Profi” wird darüber geschimpft haben, warum ich auf dem kleinen Raspberry Pi Zero eine Desktopumgebung installiert habe, anstelle darauf der geringen Ressourcen zuliebe zu verzichten. Das habe ich probiert und das Anlernen der Fernbedienung über FLIRC hat auf diese Art reichlich wenig Spaß gemacht. Außerdem sagt uns htop, dass auf dem Raspi auch bei laufendem Desktop nur ca. 100 von 512 MB Arbeitsspeicher belegt sind.</p><p>Ich hoffe der Artikel war interessant und hat zu der ein oder anderen neuen Idee für private oder auch berufliche Projekte geführt!</p></div><div class=giscus></div></main><footer id=footer><img referrerpolicy=no-referrer-when-downgrade src="https://stats.handtrixxx.com/matomo.php?idsite=1&amp;rec=1" style=border:0 alt><div class=footer><div class=text-center><a href=/ aria-label="Link to Homepage"><img src=/images/favicon.png alt=Favicon width=60 height=60></a></div><div class=flex-container><div class="flex-item-3 px" style=--px-scale:2><p class=fs style=--fs-scale:0.9>Designed and built with all the ❤️ in the world by Niklas Stephan
and the help of amazing Open Source Tools.</p><p class=mt style=--mt-scale:1>2025, Niklas Stephan</p></div><div class="flex-item-3 px" style=--px-scale:2><h5>Seiten</h5><div class=fs-7><div class=n><a class=nav-link href=/>Home</a>
<a class=nav-link href=/blog>Blog</a>
<a class=nav-link href=/privacy>Datenschutz</a>
<a class=nav-link href=/imprint>Impressum</a>
<a class=nav-link href=/search>Suche</a></div></div></div><div class="flex-item-3 px" style=--px-scale:2><h5>Kontakt</h5><p class=mb style=--mb-scale:4>Niklas Stephan<br>Innovation Architect</p><a href=https://linkedin.com/in/niklas-stephan/ target=_blank class="text-decoration-none d-flex align-items-center" aria-label="Link to LinkedIn"><svg width="18" height="18" fill="currentColor" class="bi bi-linkedin me" style="--me-scale:2" viewBox="0 0 16 16"><path d="M0 1.146C0 .513.526.0 1.175.0h13.65C15.474.0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487.0 14.854zm4.943 12.248V6.169H2.542v7.225zm-1.2-8.212c.837.0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248S2.4 3.226 2.4 3.934c0 .694.521 1.248 1.327 1.248zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869.0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274.0-1.845.7-2.165 1.193v.025h-.016l.016-.025V6.169h-2.4c.03.678.0 7.225.0 7.225z"/></svg>
linkedin.com/in/niklas-stephan
</a><a href=https://github.com/handtrixx target=_blank class="fs-7 text-decoration-none d-flex align-items-center" aria-label="Link to GitHub"><svg width="18" height="18" fill="currentColor" class="bi bi-github me" style="--me-scale:2" viewBox="0 0 16 16"><path d="M8 0C3.58.0.0 3.58.0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38.0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95.0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12.0.0.67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15.0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48.0 1.07-.01 1.93-.01 2.2.0.21.15.46.55.38A8.01 8.01.0 0016 8c0-4.42-3.58-8-8-8"/></svg>
https://github.com/handtrixx
</a><a href=mailto:mail@niklas-stephan.de target=_blank class="text-decoration-none d-flex align-items-center" aria-label="Link to Mail"><svg width="18" height="18" fill="currentColor" style="--me-scale:2" class="bi bi-envelope-at-fill me" viewBox="0 0 16 16"><path d="M2 2A2 2 0 00.05 3.555L8 8.414l7.95-4.859A2 2 0 0014 2zm-2 9.8V4.698l5.803 3.546zm6.761-2.97-6.57 4.026A2 2 0 002 14h6.256A4.5 4.5.0 018 12.5a4.49 4.49.0 011.606-3.446l-.367-.225L8 9.586zM16 9.671V4.697l-5.803 3.546.338.208A4.5 4.5.0 0112.5 8c1.414.0 2.675.652 3.5 1.671"/><path d="M15.834 12.244c0 1.168-.577 2.025-1.587 2.025-.503.0-1.002-.228-1.12-.648h-.043c-.118.416-.543.643-1.015.643-.77.0-1.259-.542-1.259-1.434v-.529c0-.844.481-1.4 1.26-1.4.585.0.87.333.953.63h.03v-.568h.905v2.19c0 .272.18.42.411.42.315.0.639-.415.639-1.39v-.118c0-1.277-.95-2.326-2.484-2.326h-.04c-1.582.0-2.64 1.067-2.64 2.724v.157c0 1.867 1.237 2.654 2.57 2.654h.045c.507.0.935-.07 1.18-.18v.731c-.219.1-.643.175-1.237.175h-.044C10.438 16 9 14.82 9 12.646v-.214C9 10.36 10.421 9 12.485 9h.035c2.12.0 3.314 1.43 3.314 3.034zm-4.04.21v.227c0 .586.227.8.581.8.31.0.564-.17.564-.743v-.367c0-.516-.275-.708-.572-.708-.346.0-.573.245-.573.791"/></svg>
mail@niklas-stephan.de</a></div></div></div></footer><script src="/js/scripts.min.c2fc1772ee9a696dad8b3a67f5412edd8ef91a1bc768db7aebae9c5c3a046e05.js"></script><script src=/js/post.js></script><script src=https://giscus.app/client.js data-repo=handtrixx/niklas-stephan.de data-repo-id=R_kgDOO0IMLw data-category=Announcements data-category-id=DIC_kwDOO0IML84Cq5zP data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=de data-loading=lazy crossorigin=anonymous async></script></body></html>